import{dH as b,dl as y,r as w,dp as e,eJ as h,dq as g,eH as n}from"./index-EF4sIdtj.js";import{T as k}from"./trending-up-Dvs6H5MN.js";const _=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],f=b("circle-alert",_);const z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],T=b("target",z),u=[{label:"7-12",min:7,max:12,stage:"ДЕТИ"},{label:"13-17",min:13,max:17,stage:"ПОДРОСТКИ"},{label:"18-35",min:18,max:35,stage:"МОЛОДЕЖЬ"}],E=()=>{const{logs:x,selectableUsers:d}=y(),p=w.useMemo(()=>{const s=d.reduce((t,c)=>(t[c.name]={age:c.age},t),{}),o=["Science","Technology","Economics","Society","Politics","Art","Health"];return u.map(t=>{const c=x.filter(i=>{const a=s[i.userId]?.age||0;return a>=t.min&&a<=t.max});return{group:t.label,clusters:o.map(i=>{const a=c.filter(r=>r.cluster===i),l=a.length,m=a.filter(r=>(r.cognitiveLoad||0)>6),j=a.filter(r=>r.evidenceLevel!=="High"),N=m.length>0?m.length/Math.max(l,1)*100:0,v=l>2&&j.length/l>.5;return{name:i,interest:l,potential:Math.round(N),deficit:v}})}})},[x,d]);return e.jsxs("div",{className:"flex flex-col h-full bg-[#050505]/60 backdrop-blur-xl border border-white/5 rounded-2xl p-5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none bg-[radial-gradient(#ffffff_1px,transparent_1px)] [background-size:20px_20px]"}),e.jsxs("div",{className:"flex justify-between items-center mb-6 z-10",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("h3",{className:"text-[11px] font-black text-white uppercase tracking-[0.4em] flex items-center gap-2",children:[e.jsx(T,{size:14,className:"text-cyan-400"}),"СТРАТЕГИЧЕСКАЯ_МАТРИЦА_v2"]}),e.jsx("span",{className:"text-[7px] text-white/20 uppercase font-mono tracking-widest",children:"Анализ возрастных когорт и потенциала"})]}),e.jsxs("div",{className:"flex gap-4 p-1.5 bg-white/[0.02] border border-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2",children:[e.jsx(h,{size:10,className:"text-emerald-400"}),e.jsx("span",{className:"text-[8px] text-white/40 uppercase font-black",children:"PTN"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2 border-l border-white/5",children:[e.jsx(f,{size:10,className:"text-red-400"}),e.jsx("span",{className:"text-[8px] text-white/40 uppercase font-black",children:"DFT"})]})]})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-[60px_1fr] gap-4 min-h-0 z-10",children:[e.jsx("div",{className:"flex flex-col justify-between py-6",children:u.map(s=>e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] font-black text-white/40 uppercase tracking-tighter tabular-nums",children:s.label}),e.jsx("span",{className:"text-[7px] font-bold text-cyan-400/40 uppercase tracking-widest",children:s.stage})]},s.label))}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2",children:p[0].clusters.map(s=>e.jsx("div",{className:"text-[8px] font-black text-white/30 uppercase text-center truncate tracking-widest",children:g[s.name]?.slice(0,3)||s.name.slice(0,3)},s.name))}),e.jsx("div",{className:"flex-1 grid grid-rows-3 gap-2",children:p.map((s,o)=>e.jsx("div",{className:"grid grid-cols-7 gap-2",children:s.clusters.map((t,c)=>{const i=Math.min(t.interest/20,1),a=t.potential>30,l=t.deficit;return e.jsxs(n.div,{whileHover:{scale:1.05,backgroundColor:"rgba(255,255,255,0.08)"},className:"relative bg-white/[0.03] border border-white/[0.05] rounded-lg p-2 flex flex-col items-center justify-center gap-1.5 group/cell overflow-hidden cursor-crosshair",children:[i>.5&&e.jsx("div",{className:"absolute inset-0 bg-cyan-500/5 animate-pulse"}),e.jsx(n.div,{initial:{height:0},animate:{height:`${i*100}%`},className:"absolute bottom-0 left-0 right-0 bg-white/[0.02] border-t border-white/5"}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-white/10 animate-scan pointer-events-none opacity-0 group-hover/cell:opacity-100"}),e.jsxs("div",{className:"relative z-20 flex flex-col items-center gap-1",children:[e.jsx("span",{className:`text-[12px] font-black tabular-nums transition-colors ${i>.7?"text-white":"text-white/40"}`,children:t.interest}),e.jsxs("div",{className:"flex gap-1.5 h-3 items-center",children:[a&&e.jsx(n.div,{animate:{opacity:[.5,1,.5]},transition:{repeat:1/0,duration:1.5},children:e.jsx(h,{size:10,className:"text-emerald-400 fill-emerald-400/20"})}),l&&e.jsx(n.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},children:e.jsx(f,{size:10,className:"text-red-500"})})]})]}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover/cell:opacity-100 transition-opacity bg-black/80 backdrop-blur-sm z-30 flex-col gap-1",children:[e.jsx("span",{className:"text-[7px] font-black text-white/40 uppercase",children:g[t.name]}),a&&e.jsxs("span",{className:"text-[8px] text-emerald-400 font-bold",children:["+",t.potential,"% PTN"]}),l&&e.jsx("span",{className:"text-[8px] text-red-400 font-bold",children:"CRIT DFT"})]})]},`${o}-${c}`)})},s.group))})]})]}),e.jsxs("div",{className:"mt-5 p-3 bg-cyan-500/[0.03] border border-cyan-500/10 rounded-xl flex items-center gap-4 z-10 transition-colors hover:bg-cyan-500/[0.05]",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-cyan-500/10 flex items-center justify-center shrink-0",children:e.jsx(k,{size:16,className:"text-cyan-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-[8px] font-black text-cyan-400/80 uppercase tracking-widest mb-0.5",children:"Инсайт Потока"}),e.jsxs("p",{className:"text-[9px] text-white/40 leading-tight uppercase font-medium",children:["Критический потенциал роста обнаружен в группе ",e.jsx("span",{className:"text-emerald-400/80 font-black",children:"26-35"}),". Рекомендуемая нагрузка: ",e.jsx("span",{className:"text-white/60",children:"+15% ТЕХ_СТЕК"}),"."]})]})]})]})};export{E as DemographicMatrix};
