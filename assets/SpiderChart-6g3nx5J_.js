import{R as w,u as v,r as M,b as N,j as e,a as R}from"./index-VyhKji2U.js";import{R as D}from"./CategoricalChart-kx1i0unR.js";import{R as S,P as k,a as G,b as g}from"./RadarChart-Bg7Ur1rJ.js";import"./with-selector-BwKRMBZb.js";import"./ordinal-C42Khp9f.js";const A=({themeColor:E="#3b82f6"})=>{const{logs:c,currentUser:r}=v(),d=["Education","Science","Labor","Culture","Volunteering","Patriotism","Sports","HealthyLifestyle","Media","Diplomacy","Ecology","Tourism"],{data:j,personalDominant:y,globalMax:b}=M.useMemo(()=>{const u=c.filter(t=>t.userId===r.id||t.userId===r.name),a={};u.forEach(t=>{a[t.cluster]=(a[t.cluster]||0)+1});const o={};c.forEach(t=>{o[t.cluster]=(o[t.cluster]||0)+1});const n=Math.max(...Object.values(o),5);let C=r.id.split("").reduce((t,s)=>t+s.charCodeAt(0),0);const l=()=>{const t=Math.sin(C++)*1e4;return t-Math.floor(t)},m=l();let p=1;m>.85?p=3:m>.6&&(p=2);const f=Object.entries(a).sort((t,s)=>s[1]-t[1])[0]?.[0]||"Science",x=new Set([f]);for(;x.size<p;){const t=Math.floor(l()*d.length),s=d[t];s&&x.add(s)}return{data:d.map(t=>{const s=x.has(t);let h;return s?h=90+l()*10:h=15+l()*45,{subject:N[t]||t,personal:h,global:(o[t]||0)/n*100,fullMark:100}}),personalDominant:f,globalMax:n}},[c,r]),i=R(y);return e.jsxs("div",{className:"w-full h-full relative group",children:[e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(S,{cx:"50%",cy:"50%",outerRadius:"75%",data:j,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"personalGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:i,stopOpacity:.6}),e.jsx("stop",{offset:"95%",stopColor:i,stopOpacity:.1})]}),e.jsxs("filter",{id:"personalGlow",height:"300%",width:"300%",x:"-75%",y:"-75%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"glow"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"glow"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsx("filter",{id:"globalGlow",height:"200%",width:"200%",x:"-50%",y:"-50%",children:e.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"glow"})})]}),e.jsx(k,{gridType:"polygon",stroke:"rgba(255,255,255,0.05)",strokeWidth:1}),e.jsx(G,{dataKey:"subject",tick:u=>{const{x:a,y:o,payload:n}=u;return e.jsx("text",{x:a,y:o,textAnchor:"middle",fill:"#6b7280",fontSize:7,fontFamily:"JetBrains Mono",fontWeight:"bold",className:"uppercase tracking-tighter",children:n.value})}}),e.jsx(g,{name:"Global",dataKey:"global",stroke:"rgba(255,255,255,0.15)",strokeWidth:1,fill:"rgba(59, 130, 246, 0.05)",fillOpacity:1,isAnimationActive:!0,animationDuration:1e3}),e.jsx(g,{name:"Personal",dataKey:"personal",stroke:i,strokeWidth:2,fill:"url(#personalGradient)",fillOpacity:1,filter:"url(#personalGlow)",isAnimationActive:!0,animationDuration:600})]})}),e.jsxs("div",{className:"absolute top-2 right-2 flex flex-col items-end gap-1 opacity-40 group-hover:opacity-100 transition-opacity",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:i}}),e.jsx("span",{className:"text-[6px] font-mono text-white/60",children:"YOU"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white/20"}),e.jsx("span",{className:"text-[6px] font-mono text-white/40",children:"COLLECTIVE"})]})]}),e.jsxs("div",{className:"absolute bottom-2 left-2 text-[7px] font-mono text-blue-400/20 uppercase tracking-widest",children:["Topology Density: ",b," units"]})]})},K=w.memo(A);export{K as SpiderChart};
