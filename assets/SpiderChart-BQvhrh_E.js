import{R as h,dl as m,r as p,dq as l,dp as t,dr as j,ds as g,dt as C,du as y,dv as b,dm as v}from"./index-DX5MiQ-v.js";const A=({themeColor:S="#3b82f6"})=>{const{logs:d,currentUser:r}=m(),c=["Science","Technology","Economics","Society","Politics","Art"],{data:i,dominantCluster:u}=p.useMemo(()=>{const e=d.filter(s=>s.userId===r.id||s.userId===r.name),a={};e.forEach(s=>{a[s.cluster]=(a[s.cluster]||0)+1});const o=Object.entries(a).sort((s,x)=>x[1]-s[1])[0]?.[0]||"Science",f=Math.max(...Object.values(a),1);return{data:c.map(s=>({subject:l[s]||s,A:(a[s]||0)/f*100,rawCount:a[s]||0,fullMark:100})),dominantCluster:o}},[d,r,c]),n=v(u);return t.jsxs("div",{className:"w-full h-full relative group",children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none",children:c.map((e,a)=>t.jsx("div",{className:"absolute w-1 h-1 rounded-full animate-pulse transition-all duration-700",style:{top:"50%",left:"50%",backgroundColor:n,transform:`rotate(${a*60-90}deg) translate(80px) rotate(-${a*60-90}deg)`,opacity:i.find(o=>o.subject===(l[e]||e))?.A?.8:.2,scale:i.find(o=>o.subject===(l[e]||e))?.A?1+(i.find(o=>o.subject===(l[e]||e))?.A||0)/200:1}},e))}),t.jsx(j,{width:"100%",height:"100%",children:t.jsxs(g,{cx:"50%",cy:"50%",outerRadius:"70%",data:i,children:[t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"radarFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:n,stopOpacity:.4}),t.jsx("stop",{offset:"95%",stopColor:n,stopOpacity:.1})]}),t.jsxs("filter",{id:"glow",height:"300%",width:"300%",x:"-75%",y:"-75%",children:[t.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),t.jsxs("feMerge",{children:[t.jsx("feMergeNode",{in:"coloredBlur"}),t.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),t.jsx(C,{gridType:"polygon",stroke:"rgba(255,255,255,0.08)",strokeDasharray:"3 3"}),t.jsx(y,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:8,fontFamily:"monospace",fontWeight:"bold"}}),t.jsx(b,{name:"Компетенция",dataKey:"A",stroke:n,strokeWidth:2,fill:"url(#radarFill)",fillOpacity:1,filter:"url(#glow)",isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out"})]})}),t.jsxs("div",{className:"absolute bottom-1 left-1 text-[7px] font-mono text-gray-600",children:["Σ ",d.filter(e=>e.userId===r.id||e.userId===r.name).length]})]})},N=h.memo(A);export{N as SpiderChart};
